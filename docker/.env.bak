############
# Secrets
# YOU MUST CHANGE THESE BEFORE GOING INTO PRODUCTION
############

POSTGRES_PASSWORD=your-super-secret-and-long-postgres-password
TEMPLATE_DATABASE_NAME=supabase_template
JWT_SECRET=your-super-secret-jwt-token-with-at-least-32-characters-long
ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJhbm9uIiwKICAgICJpc3MiOiAic3VwYWJhc2UtZGVtbyIsCiAgICAiaWF0IjogMTY0MTc2OTIwMCwKICAgICJleHAiOiAxNzk5NTM1NjAwCn0.dc_X5iR_VP_qT0zsiyj_I_OZ2T9FtRU2BBNWN8Bu4GE
SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJzZXJ2aWNlX3JvbGUiLAogICAgImlzcyI6ICJzdXBhYmFzZS1kZW1vIiwKICAgICJpYXQiOiAxNjQxNzY5MjAwLAogICAgImV4cCI6IDE3OTk1MzU2MDAKfQ.DaYlNEoUrrEn2Ig7tqibS-PHK5vgusbcbo7X36XVt4Q
# DASHBOARD_USERNAME=supabase
# DASHBOARD_PASSWORD=this_password_is_insecure_and_should_be_updated
SECRET_KEY_BASE=your-secret-key-base-change-this-in-production
VAULT_ENC_KEY=your-encryption-key-32-chars-min
PG_META_CRYPTO_KEY=your-encryption-key-32-chars-min


############
# Database - You can change these to any PostgreSQL database that has logical replication enabled.
############

POSTGRES_HOST=your-external-db-host
POSTGRES_DB=postgres
POSTGRES_PORT=5432
# default user is postgres


############
# Supavisor -- Database pooler
############
# Port Supavisor listens on for transaction pooling connections
POOLER_PROXY_PORT_TRANSACTION=6543
# Maximum number of PostgreSQL connections Supavisor opens per pool
POOLER_DEFAULT_POOL_SIZE=20
# Maximum number of client connections Supavisor accepts per pool
POOLER_MAX_CLIENT_CONN=100
# Unique tenant identifier
POOLER_TENANT_ID=your-tenant-id
# Pool size for internal metadata storage used by Supavisor
# This is separate from client connections and used only by Supavisor itself
POOLER_DB_POOL_SIZE=5


############
# API Proxy - Configuration for the Kong Reverse proxy.
############

KONG_HTTP_PORT=8000
KONG_HTTPS_PORT=8443


############
# API - Configuration for PostgREST.
############

PGRST_DB_SCHEMAS=public,storage,graphql_public


############
# Auth - Configuration for the GoTrue authentication server.
############

## General
SITE_URL=http://localhost:3000
ADDITIONAL_REDIRECT_URLS=
JWT_EXPIRY=3600
DISABLE_SIGNUP=false
# API_EXTERNAL_URL is used by GoTrue for callbacks and by browser
# Must be accessible from both the host machine and containers
API_EXTERNAL_URL=http://localhost:8000

## Mailer Config
MAILER_URLPATHS_CONFIRMATION="/auth/v1/verify"
MAILER_URLPATHS_INVITE="/auth/v1/verify"
MAILER_URLPATHS_RECOVERY="/auth/v1/verify"
MAILER_URLPATHS_EMAIL_CHANGE="/auth/v1/verify"

## Email auth
ENABLE_EMAIL_SIGNUP=true
ENABLE_EMAIL_AUTOCONFIRM=true
SMTP_ADMIN_EMAIL=admin@example.com
SMTP_HOST=supabase-mail
SMTP_PORT=2500
SMTP_USER=fake_mail_user
SMTP_PASS=fake_mail_password
SMTP_SENDER_NAME=fake_sender
ENABLE_ANONYMOUS_USERS=false

## External Host Whitelist - Allow public IP access
# Add your public IP and domain here (comma-separated)
GOTRUE_EXTERNAL_HOST_WHITELIST=localhost,192.0.2.1

## Phone auth
ENABLE_PHONE_SIGNUP=true
ENABLE_PHONE_AUTOCONFIRM=true


############
# Studio - Configuration for the Dashboard
############

STUDIO_DEFAULT_ORGANIZATION="Default Organization"
STUDIO_DEFAULT_PROJECT="Default Project"

# Frontend environment variables for browser access
NEXT_PUBLIC_GOTRUE_URL=http://localhost:8000/auth/v1
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyAgCiAgICAicm9sZSI6ICJhbm9uIiwKICAgICJpc3MiOiAic3VwYWJhc2UtZGVtbyIsCiAgICAiaWF0IjogMTY0MTc2OTIwMCwKICAgICJleHAiOiAxNzk5NTM1NjAwCn0.dc_X5iR_VP_qT0zsiyj_I_OZ2T9FtRU2BBNWN8Bu4GE
NEXT_PUBLIC_SUPABASE_URL=http://localhost:8000

############
# Runtime Configuration - URLs that can be changed without rebuilding
############

# IMPORTANT: These URLs are used by the browser and must be accessible from the host machine
# For production deployments, change these to your public-facing URLs

# Main Supabase API URL - used by the browser to access your Supabase instance
# Examples:
#   Development: http://localhost:8000
#   Production:  https://your-domain.com:8000 or https://api.your-domain.com
SUPABASE_PUBLIC_URL=http://localhost:8000

# External API URL - used for callbacks and external integrations
# This should be the same as SUPABASE_PUBLIC_URL in most cases
# Must be accessible from both the browser and external services
API_EXTERNAL_URL=http://localhost:8000

# Environment Detection Configuration
# Requirements 1.1, 1.2, 1.3: Proper environment variable configuration for Docker builds

# ENVIRONMENT variable (HIGHEST PRIORITY for environment detection)
# This variable takes precedence over NODE_ENV and all other environment detection methods
# Values: development, staging, production
# Default: development (safe for local development)
ENVIRONMENT=development

# NODE_ENV variable (Node.js standard environment variable)
# Used as fallback when ENVIRONMENT is not set
# Values: development, production
# Default: production (Node.js convention)
NODE_ENV=development

# Platform configuration
# Set to true for Supabase Platform deployments, false for self-hosted
NEXT_PUBLIC_IS_PLATFORM=false

# Authentication requirement
# Set to true to require login, false for open access
NEXT_PUBLIC_REQUIRE_LOGIN=true

############
# Multi-Environment Deployment Guide
############
# 
# For DEVELOPMENT (localhost):
#   SUPABASE_PUBLIC_URL=http://localhost:8000
#   API_EXTERNAL_URL=http://localhost:8000
#   ENVIRONMENT=development
#
# For STAGING:
#   SUPABASE_PUBLIC_URL=https://staging-api.your-domain.com
#   API_EXTERNAL_URL=https://staging-api.your-domain.com
#   ENVIRONMENT=staging
#
# For PRODUCTION:
#   SUPABASE_PUBLIC_URL=https://api.your-domain.com
#   API_EXTERNAL_URL=https://api.your-domain.com
#   ENVIRONMENT=production
#
# The same Docker image can be used across all environments by changing
# only these environment variables without rebuilding.

############
# Additional Configuration
############

# Enable webp support
IMGPROXY_ENABLE_WEBP_DETECTION=true

# Add your OpenAI API key to enable SQL Editor Assistant
OPENAI_API_KEY=

# Database Discovery - Set to true to automatically discover existing databases
# Default: false
ENABLE_DATABASE_DISCOVERY=false

# Database Service Control - Set to true to enable the built-in PostgreSQL database
# Set to false to use an external database
# Default: false (external database)
ENABLE_SUPABASE_DB=true

# Database Creation Configuration
# Time to wait (in milliseconds) after terminating connections to template database
# Default: 500
TEMPLATE_CONNECTION_WAIT_MS=500

# Maximum retry attempts for database creation when template is locked
# Default: 3
DATABASE_CREATION_MAX_RETRIES=3

# Base delay (in milliseconds) between retry attempts (uses exponential backoff)
# Default: 500
DATABASE_CREATION_RETRY_DELAY_MS=500


############
# Functions - Configuration for Functions
############
# NOTE: VERIFY_JWT applies to all functions. Per-function VERIFY_JWT is not supported yet.
FUNCTIONS_VERIFY_JWT=false


############
# Logs - Configuration for Analytics
# Please refer to https://supabase.com/docs/reference/self-hosting-analytics/introduction
############

# Change vector.toml sinks to reflect this change
# these cannot be the same value
LOGFLARE_PUBLIC_ACCESS_TOKEN=your-super-secret-and-long-logflare-key-public
LOGFLARE_PRIVATE_ACCESS_TOKEN=your-super-secret-and-long-logflare-key-private

# Docker socket location - this value will differ depending on your OS
DOCKER_SOCKET_LOCATION=/var/run/docker.sock

# Google Cloud Project details
GOOGLE_PROJECT_ID=GOOGLE_PROJECT_ID
GOOGLE_PROJECT_NUMBER=GOOGLE_PROJECT_NUMBER

NEXT_PUBLIC_HCAPTCHA_SITE_KEY=10000000-ffff-ffff-ffff-000000000001
HCAPTCHA_SECRET_KEY=0x0000000000000000000000000000000000000000
